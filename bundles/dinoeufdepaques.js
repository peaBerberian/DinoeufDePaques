var B=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function T(t){if(t>=B.length)throw new Error("Unable to parse base64 string.");let e=B[t];if(e===255)throw new Error("Unable to parse base64 string.");return e}function Q(t){let e=t.length%4,n=t;e!==0&&(n+=e===3?"=":e===2?"==":"===");let a=n.indexOf("=");if(a!==-1&&a<n.length-2)throw new Error("Unable to parse base64 string.");let o=n.endsWith("==")?2:n.endsWith("=")?1:0,l=n.length,g=new Uint8Array(l/4*3),S;for(let c=0,x=0;c<l;c+=4,x+=3)S=T(n.charCodeAt(c))<<18|T(n.charCodeAt(c+1))<<12|T(n.charCodeAt(c+2))<<6|T(n.charCodeAt(c+3)),g[x]=S>>16,g[x+1]=S>>8&255,g[x+2]=S&255;return g.subarray(0,g.length-o)}var U=M("UklGRuwAAABXRUJQVlA4WAoAAAAQAAAAVwAAVAAAQUxQSE0AAAABDzD/ERGCUdtIkiItgOLPZiE1g3rMXXu8I/o/AbRlW6S43VFR7Q8Qwwg7QkDZkHI7xuA2RNVUSJ/3qSNaIqsaUrCtnDK+csQ4gSgdAgBWUDggeAAAAFAJAJ0BKlgAVQA+bSiRRaQiIZjuzABABsS0gAtqXwB/IPf97/CNxcHcc2w/unx9sLS9x6k8GLk0kRXF7wka9obb/mK8UuRZ9K/WzCHrJnw7ofAAAP77nVn5i39pMNLzvCdWDa9Bheh14NumBGnRsEDNUK+pEAAAAA==","image/webp"),N=M("UklGRuYAAABXRUJQVlA4WAoAAAAQAAAAVwAAVAAAQUxQSEkAAAABDzD/ERGCTSNJjprB8mfzkIZBB+/nTRzR/wlgHXVocX1FqtY/YNit0IoBotCyWCO4LpmsUrLN++SWOUVXVrSgTk8mRUgTZd4CAFZQOCB2AAAA8AgAnQEqWABVAD5tKJJFpCIhmH8kAEAGxLSAC2pfAH8l9/3v8IyJGmsC/PZUxXKIF9DFBJAYuoiRFcXvCMBregvJVb4Xj+uuCzecZbL5XwAA/vudWieLf2kw3ie36lL47jU36HXg26YEac9949i5P//piwAAAA==","image/webp"),r=M("UklGRsgAAABXRUJQVlA4WAoAAAAQAAAAMQAAaAAAQUxQSEcAAAABDzD/ERGCURtJjlpaAENlGQz1gXThO9LmHN4R/Z8AQAlpwfHphOoeLmmDM5eWUoMpaYLS45zjCnGOUQHcm635HaOmXRrWBgBWUDggWgAAAFAGAJ0BKjIAaQA+ZSaPRaQiIRrfJABABkS0gABFY1QPcemKs+XBlVsTKxrD+ICRG5uaseo2YNyxxnwAAP78Xjf+Ur//KqkMgAAMn8fWz8X7X4CKZ/OwAAAAAA==","image/webp");function M(t,e){let n=Q(t),a=new Blob([n.buffer],{type:e}),o=URL.createObjectURL(a),l=new Image;return l.src=o,l}var $=[13,32,38],ee=[37],p=350,f=1e3,te=30,w=30,b=200,O=15,k=2,ne=15,oe=6e4,C=180,ie=40,V=3,G=10,m=p-(w+30),I=new AbortController,d=document.createElement("div");d.style.position="fixed";d.style.top="0px";d.style.left="0px";d.style.width="100%";d.style.textAlign="center";d.style.zIndex=String(Math.pow(2,32));var h=document.createElement("canvas"),i=h.getContext("2d");h.height=p;h.width=f;h.style.backgroundColor="#ffffffcc";h.style.border="1px dashed black";d.appendChild(h);I.signal.addEventListener("abort",()=>{d.parentElement.removeChild(d)});var W=!1,_,L,D=!0,R=!0,u=null,E=b,P=O,s=[],A=[];function se(){W=!0,_=void 0,L=void 0,D=!0,R=!0,u=null,E=b,P=O,s.length=0,A.length=0,Z(800,1),q(0),window.requestAnimationFrame(H)}var ae=new Promise(t=>{document.readyState==="complete"||document.readyState,t()});Promise.all([X(U),X(N),X(r),ae]).then(()=>{if(I.signal.aborted)return;document.body.appendChild(d);let t=e=>{ee.includes(e.keyCode)?I.abort():$.includes(e.keyCode)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),y())};J(),F(),Y(0),K(),j(),document.addEventListener("keydown",t),h.addEventListener("click",y),I.signal.addEventListener("abort",()=>{document.removeEventListener("keydown",t),h.removeEventListener("click",y)}),i.font="24px monospace",i.fillStyle="#000000",i.fillText('Jump ("space", "up", or "enter") to start',10,80),i.fillText('Press "left" to exit',10,120)});function H(t){if(I.signal.aborted)return;_===void 0&&(_=t);let e=L===void 0?0:t-L;for(L=t;e>0;){let a=e<G?e:G;e-=a;let o=L-e;if(u!==null&&(P-=a,P<=0)){u>=C&&(R=!1,u=C);let S=(C-u)/C,c=Math.ceil(ie*S);c<V&&(c=V),R?(u+=c,u=Math.min(u,C)):u-c<=0?(R=!0,u=null,E=b,D=!D):u-=c,P+=O}E!==null&&(E-=a,E<=0&&(D=!D,E+=b));let l=o-_,g=Math.min(l/oe,1)*(ne-k)+k;if(ce(g),fe(g),le()){v(l),ue(),W=!1;return}}let n=t-_;v(n),window.requestAnimationFrame(H)}function v(t){re(),J(),F(),Y(t),K(),de(),Ae(),j()}function J(){i.fillStyle="#87ceeb66",i.fillRect(0,0,f,m),i.fillStyle="#000000"}function F(){i.fillStyle="#fad5a566",i.fillRect(0,m,f,p-m),i.fillStyle="#000000"}function K(){i.beginPath(),i.moveTo(0,m),i.lineTo(f,m),i.lineWidth=2,i.stroke()}function re(){i.clearRect(0,0,f,p)}function y(){if(!W){se();return}u===null&&(u=0,E=null)}function le(){let[t,e]=z();for(let n of s)if(!(n<10)&&!(e>65&&R)&&n+20-(t+U.naturalWidth)<=0&&e-(w+(r.naturalHeight-30))<=0)return!0;return!1}function Y(t){i.font="18px monospace",i.fillText("Score: "+String(Math.floor(t/200)),10,30)}function ue(){i.font="35px monospace",i.fillStyle="#990000",i.fillText("GAME OVER",10,80),i.font="24px monospace",i.fillStyle="#000000",i.fillText("jump to restart",10,120),i.fillText('Press "left" to exit',10,160)}function z(){let t=te,e=w+(u!=null?u:0);return[t,e]}function j(){let t=D?U:N,[e,n]=z();i.drawImage(t,e,p-t.naturalHeight-n,t.naturalWidth,t.naturalHeight)}function ce(t){for(let n=0;n<s.length;n++){let o=s[n]-t;if(o<-r.naturalWidth){s.splice(n,1),n--;continue}s[n]=o}let e=s[s.length-1];(e===void 0||e<=f)&&Z(e!=null?e:f,t/2)}function Ae(){for(let t=0;t<s.length;t++){let e=s[t];if(e>=f)return;let n=w;i.drawImage(r,e,p-r.naturalHeight-n,r.naturalWidth,r.naturalHeight)}}function fe(t){for(let n=0;n<A.length;n++){let{x:a,longueur:o}=A[n],l=a-t;l<-o?(A.splice(n,1),n--):A[n].x=l}let e=A[A.length-1];(e===void 0||e.x<=f)&&q(f)}function de(){i.lineWidth=1;for(let t=0;t<A.length;t++){let{x:e,y:n,longueur:a}=A[t];if(e>=f)return;i.beginPath(),i.moveTo(e,n),i.lineTo(e+a,n),i.stroke()}}function X(t){return new Promise((e,n)=>{t.addEventListener("load",e),t.addEventListener("error",n)})}function Z(t,e){let n=t;s.push(n);for(let a=1;a<=3;a++){let o=n+r.naturalWidth+590,l=Math.random();e>=3&&l<.3?(e>=5&&l<.1&&(s.push(o),o+=r.naturalWidth+1,s.push(o),o+=r.naturalWidth+1),e>=4&&l<.2&&(s.push(o),o+=r.naturalWidth+1,s.push(o),o+=r.naturalWidth+1),s.push(o),o+=r.naturalWidth+1,s.push(o),o+=r.naturalWidth+1,s.push(o),o+=r.naturalWidth+1):l>.9?(e>=2&&(s.push(o),o+=r.naturalWidth+1),s.push(o),o+=r.naturalWidth+1):l>.7?(e>=2&&(s.push(o),o+=r.naturalWidth+1),s.push(o)):o+=250*l,s.push(o),n=o}s.sort((a,o)=>a-o)}function q(t){for(let e=1;e<=1e3;e++){let n=Math.random(),a=(n*2-1)*.7;A.push({x:t+e*100*(1+a),y:n*(p-(m+5)+1)+(m+5),longueur:n*40+1})}A.sort((e,n)=>e.x-n.x)}
