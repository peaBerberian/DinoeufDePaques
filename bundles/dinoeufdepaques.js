var V=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function _(t){if(t>=V.length)throw new Error("Unable to parse base64 string.");let e=V[t];if(e===255)throw new Error("Unable to parse base64 string.");return e}function k(t){let e=t.length%4,n=t;e!==0&&(n+=e===3?"=":e===2?"==":"===");let a=n.indexOf("=");if(a!==-1&&a<n.length-2)throw new Error("Unable to parse base64 string.");let o=n.endsWith("==")?2:n.endsWith("=")?1:0,s=n.length,p=new Uint8Array(s/4*3),C;for(let h=0,I=0;h<s;h+=4,I+=3)C=_(n.charCodeAt(h))<<18|_(n.charCodeAt(h+1))<<12|_(n.charCodeAt(h+2))<<6|_(n.charCodeAt(h+3)),p[I]=C>>16,p[I+1]=C>>8&255,p[I+2]=C&255;return p.subarray(0,p.length-o)}var x=O("UklGRuwAAABXRUJQVlA4WAoAAAAQAAAAVwAAVAAAQUxQSE0AAAABDzD/ERGCUdtIkiItgOLPZiE1g3rMXXu8I/o/AbRlW6S43VFR7Q8Qwwg7QkDZkHI7xuA2RNVUSJ/3qSNaIqsaUrCtnDK+csQ4gSgdAgBWUDggeAAAAFAJAJ0BKlgAVQA+bSiRRaQiIZjuzABABsS0gAtqXwB/IPf97/CNxcHcc2w/unx9sLS9x6k8GLk0kRXF7wka9obb/mK8UuRZ9K/WzCHrJnw7ofAAAP77nVn5i39pMNLzvCdWDa9Bheh14NumBGnRsEDNUK+pEAAAAA==","image/webp"),M=O("UklGRuYAAABXRUJQVlA4WAoAAAAQAAAAVwAAVAAAQUxQSEkAAAABDzD/ERGCTSNJjprB8mfzkIZBB+/nTRzR/wlgHXVocX1FqtY/YNit0IoBotCyWCO4LpmsUrLN++SWOUVXVrSgTk8mRUgTZd4CAFZQOCB2AAAA8AgAnQEqWABVAD5tKJJFpCIhmH8kAEAGxLSAC2pfAH8l9/3v8IyJGmsC/PZUxXKIF9DFBJAYuoiRFcXvCMBregvJVb4Xj+uuCzecZbL5XwAA/vudWieLf2kw3ie36lL47jU36HXg26YEac9949i5P//piwAAAA==","image/webp"),l=O("UklGRsgAAABXRUJQVlA4WAoAAAAQAAAAMQAAaAAAQUxQSEcAAAABDzD/ERGCURtJjlpaAENlGQz1gXThO9LmHN4R/Z8AQAlpwfHphOoeLmmDM5eWUoMpaYLS45zjCnGOUQHcm635HaOmXRrWBgBWUDggWgAAAFAGAJ0BKjIAaQA+ZSaPRaQiIRrfJABABkS0gABFY1QPcemKs+XBlVsTKxrD+ICRG5uaseo2YNyxxnwAAP78Xjf+Ur//KqkMgAAMn8fWz8X7X4CKZ/OwAAAAAA==","image/webp");function O(t,e){let n=k(t),a=new Blob([n.buffer],{type:e}),o=URL.createObjectURL(a),s=new Image;return s.src=o,s}var Z=[13,32,38],q=[37],m=350,f=1e3,$=30,N=30,b=200,y=15,W=5,G=5,ee=20,te=4e4,S=180,ne=40,v=7,w=m-(N+30),D=new AbortController,c=document.createElement("div");c.style.position="fixed";c.style.top="0px";c.style.left="0px";c.style.width="100%";c.style.textAlign="center";c.style.zIndex=String(Math.pow(2,32));var d=document.createElement("canvas"),i=d.getContext("2d");d.height=m;d.width=f;d.style.backgroundColor="#ffffffcc";d.style.border="1px dashed black";c.appendChild(d);D.signal.addEventListener("abort",()=>{c.parentElement.removeChild(c)});var Q=!1,T,U,E=!0,L=!0,A=null,g=b,R=y,P=W,r=[],u=[];function oe(){Q=!0,T=void 0,U=void 0,E=!0,L=!0,A=null,g=b,R=y,P=W,r.length=0,u.length=0,z(800,1),j(0),window.requestAnimationFrame(H)}var ie=new Promise(t=>{document.readyState==="complete"||document.readyState,t()});Promise.all([X(x),X(M),X(l),ie]).then(()=>{if(D.signal.aborted)return;document.body.appendChild(c);let t=e=>{q.includes(e.keyCode)?D.abort():Z.includes(e.keyCode)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),B())};F(0),J(),K(),document.addEventListener("keydown",t),d.addEventListener("click",B),D.signal.addEventListener("abort",()=>{document.removeEventListener("keydown",t),d.removeEventListener("click",B)}),i.font="24px monospace",i.fillStyle="#000000",i.fillText('Jump ("space", "up", or "enter") to start',10,80),i.fillText('Press "left" to exit',10,120)});function H(t){if(D.signal.aborted)return;T===void 0&&(T=t);let e=U===void 0?0:t-U;if(U=t,P-=e,P<=0&&(P+=W),A!==null&&(R-=e,R<=0)){A>=S&&(L=!1,A=S);let o=(S-A)/S,s=Math.ceil(ne*o);s<v&&(s=v),L?(A+=s,A=Math.min(A,S)):A-s<=0?(L=!0,A=null,g=b,E=!E):A-=s,R+=y}g!==null&&(g-=e,g<=0&&(E=!E,g+=b));let n=t-T,a=Math.min(n/te,1)*(ee-G)+G;if(Ae(a),ce(a),se(n),ae()){le(),Q=!1;return}window.requestAnimationFrame(H)}function se(t){re(),F(t),J(),fe(),ue(),K()}function J(){i.beginPath(),i.moveTo(0,w),i.lineTo(f,w),i.lineWidth=2,i.stroke()}function re(){i.clearRect(0,0,f,m)}function B(){if(!Q){oe();return}A===null&&(A=0,g=null)}function ae(){let[t,e]=Y();for(let n of r)if(!(n<10)&&!(e>65&&L)&&n+20-(t+x.naturalWidth)<=0&&e-(N+(l.naturalHeight-30))<=0)return!0;return!1}function F(t){i.font="18px monospace",i.fillText("Score: "+String(Math.floor(t/200)),10,30)}function le(){i.font="35px monospace",i.fillStyle="#990000",i.fillText("GAME OVER",10,80),i.font="24px monospace",i.fillStyle="#000000",i.fillText("jump to restart",10,120),i.fillText('Press "left" to exit',10,160)}function Y(){let t=$,e=N+(A!=null?A:0);return[t,e]}function K(){let t=E?x:M,[e,n]=Y();i.drawImage(t,e,m-t.naturalHeight-n,t.naturalWidth,t.naturalHeight)}function Ae(t){for(let n=0;n<r.length;n++){let o=r[n]-t;if(o<-l.naturalWidth){r.splice(n,1),n--;continue}r[n]=o}let e=r[r.length-1];(e===void 0||e<=f)&&z(e!=null?e:f,t/3)}function ue(){for(let t=0;t<r.length;t++){let e=r[t];if(e>=f)return;let n=N;i.drawImage(l,e,m-l.naturalHeight-n,l.naturalWidth,l.naturalHeight)}}function ce(t){for(let n=0;n<u.length;n++){let{x:a,longueur:o}=u[n],s=a-t;s<-o?(u.splice(n,1),n--):u[n].x=s}let e=u[u.length-1];(e===void 0||e.x<=f)&&j(f)}function fe(){i.lineWidth=1;for(let t=0;t<u.length;t++){let{x:e,y:n,longueur:a}=u[t];if(e>=f)return;i.beginPath(),i.moveTo(e,n),i.lineTo(e+a,n),i.stroke()}}function X(t){return new Promise((e,n)=>{t.addEventListener("load",e),t.addEventListener("error",n)})}function z(t,e){let n=t;r.push(n);for(let a=1;a<=3;a++){let o=n+l.naturalWidth+590,s=Math.random();e>=3&&s<.3?(e>=5&&s<.1&&(r.push(o),o+=l.naturalWidth+1),e>=4&&s<.2&&(r.push(o),o+=l.naturalWidth+1),r.push(o),o+=l.naturalWidth+1,r.push(o),o+=l.naturalWidth+1):s>.9?(e>=2&&(r.push(o),o+=l.naturalWidth+1),r.push(o),o+=l.naturalWidth+1):s>.7?(e>=2&&(r.push(o),o+=l.naturalWidth+1),r.push(o)):o+=250*s,r.push(o),n=o}r.sort((a,o)=>a-o)}function j(t){for(let e=1;e<=1e3;e++){let n=Math.random(),a=(n*2-1)*.7;u.push({x:t+e*100*(1+a),y:n*(m-(w+5)+1)+(w+5),longueur:n*40+1})}u.sort((e,n)=>e.x-n.x)}
